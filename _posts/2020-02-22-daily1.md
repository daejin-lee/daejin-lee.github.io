---
layout: post
title:  "NHN TOAST 루키 8기 베이스캠프 개발"
date:   2021-02-22
author: 이대진
categories: Daily
tags: NHN 베이스캠프
---

Sprint4 ~ Sprint5 기간에 걸쳐 본격적인 개발이 진행되었다. 우리 TF는 영화 예매 서비스를 개발하기로 결정하였다. 개발은 기능별로 각자 개발 범위를 분담하여 개발하였고, 나는 다양한 기능 중에서 예매 기능을 맡아서 개발을 하게 되었다. 영화 예매 서비스라서 예매가 가장 핵심 기능이라고 생각하기도 했고, 구현 스펙에서 요구했던 좌석 선점 기능을 직접 구현해보고 싶다는 마음이 컸기에 예매 기능을 골랐다.

<br>

개발은 대체로 순조롭게 진행되었다고 생각한다. 두 번의 고비만 빼고

<br>

첫 번째 고비는 좌석 선점 처리였다. 개발 당시에는 Spring JPA가 repository 객체의 save 메서드를 호출할 때 insert 또는 update를 수행하기 때문에, 요청이 들어왔을 때 한 번은 insert  다른 한번은 예외 없이 update를 수행했다. 이렇게 되면 좌석을 먼저 선점한 사람이 오히려 좌석을 점유하지 못하는 문제가 발생하는데... 나는 이 문제를 해결하기 위해 repository.save가 항상 insert만 호출하는 방법을 찾아보았고, 찾아낸 방법은 Persistable인터페이스를 상속받는 것이었다. 문제는 개발을 루키들끼리 하다보니 내가 생각해낸 방식(insert만 수행하도록 하는 방식)으로 선점을 처리하는 것이 맞는 것인지 확신이 서지 않았다는 것과, 개발 기간이 정말 빠듯했기 때문에 팀원들에게도 같이 찾아봐 달라고 하거나 할만한 시간이 없었다는 것이다.

<br>

두 번째 고비는 배포였다... 배포... 입사 이전에 웹을 다뤄본 것은 대학 시절에 JSP, 싸피 임베디드 트랙에서 노드.js 정도가 전부인지라 스프링으로 개발한 코드를 서버에 배포할 때 정말 시간을 많이 썼다. 금요일부터 시작해서 처음으로 배포가 성공한게 토요일 오후 늦은 시간이니... 자는 시간을 빼고 거의 하루를 배포에 쏟은 것 같다. 회사에서 배포와 관련하여 교육을 정말 자세하게 해 주었다고 생각은 하지만, 한번 배우고 완벽하게 해 내는 것은 무리였나보다. 그래도 결국 완벽하지는 않지만 어떻게든 배포를 하기는 했고... 남은 교육 기간에 시간이 나면, 아파치, 톰캣 문서를 참고하여 아무도 서버를 쓰지 않을 때... 여러 설정들을 건드려가며 배포를 다시 해보고싶다. 꼭



![내가 짠 좌석 선점 기능](https://github.com/daejin-lee/daejin-lee.github.io/blob/Centrarium/assets/images/2020-02-22-daily1/001.jpeg?raw=true)

마지막으로 내가 짠 좌석 선점 기능